<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    我是如何失去价值50000美元的Twitter用户名的 // Never More: a personal site of Ye Ding
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.16" />

  <meta property="og:title" content="我是如何失去价值50000美元的Twitter用户名的" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://blog.dyngr.com/blog/2014/02/08/how-i-lost-my-50000-dollars-twitter-username" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://blog.dyngr.com//css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Never More: a personal site of Ye Ding" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/atom-one-dark.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  
    <link rel="stylesheet" type="text/css" href="/assets/css/categories.css">
  

  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-42770963-1', 'auto');
ga('send', 'pageview');
</script>


  
</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	

    <h1 class="brand-title">Never More</h1>
    <h2 class="brand-tagline">自然体，平常心</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://blog.dyngr.com/">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/about">About</a></li>
        
      </ul>
    </nav>

    
    <div class="social-buttons">
      
        
        <a href="https://github.com/dyng" target="_blank"><i class='fa fa-github'></i></a>
        
      
        
        <a href="https://twitter.com/gbingdu" target="_blank"><i class='fa fa-twitter'></i></a>
        
      
        
        <a href="http://weibo.com/dyngrr" target="_blank"><i class='fa fa-weibo'></i></a>
        
      
      
    </div>
    

  </div>

  
    <div class="sidebar-background-overlay"></div>
    <div class="sidebar-background"></div>
  
</div>

<style type="text/css">
  .sidebar-background-overlay {
      position: absolute;
      top: 0px;
      left: 0px;
      right: 0px;
      bottom: 0px;
      background: rgba(0, 0, 0, 0.8);
      z-index: -1;
  }
  .sidebar-background {
      position: absolute;
      background: url("/images/cover.jpg");
      top: 0px;
      left: 0px;
      right: 0px;
      bottom: 0px;
      z-index: -2;
  }
</style>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
		    <div id="toc" class="pure-u-1 pure-u-md-1-4">
				<small class="toc-label">Contents</small>
		   	 	<nav id="TableOfContents">
<ul>
<li><a href="#我价值50000美元的twitter用户名被盗了">我价值50000美元的Twitter用户名被盗了</a></li>
<li><a href="#感谢paypal和godaddy">感谢PayPal和GoDaddy</a></li>
<li><a href="#胁迫的开始">胁迫的开始</a></li>
<li><a href="#paypal和godaddy-让攻击更简单">PayPal和GoDaddy，让攻击更简单</a></li>
<li><a href="#避免使用独立域名邮箱作为登录邮箱">避免使用独立域名邮箱作为登录邮箱</a></li>
<li><a href="#总结">总结</a></li>
</ul>
</nav>
		    </div>
		    
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/blog/2014/02/08/how-i-lost-my-50000-dollars-twitter-username">我是如何失去价值50000美元的Twitter用户名的</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>8</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Feb</span> <span class="post-date-year">2014</span>
            	</span>
            	
            
            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-%E6%8A%80%E6%9C%AF" href="http://blog.dyngr.com//categories/%E6%8A%80%E6%9C%AF">技术</a>
				
				</div>
			

			

			

            

<p>这是一篇在Twitter上看到的文章，文章的作者因为使用了独立域名的邮箱地址作为网站的登录邮箱，导致在DNS服务器被攻破时失去了很多网站帐号的控制，最终损失了价值50000美刀的Twitter帐号。独立域名邮箱作为提升逼格的一种重要手段，相信还是有不少程序员对此趋之若鹜的XD 特别推荐倒数第二段作者吸取的教训，很值得一看。</p>

<p>====</p>

<h1 id="我价值50000美元的twitter用户名被盗了">我价值50000美元的Twitter用户名被盗了</h1>

<h1 id="感谢paypal和godaddy">感谢PayPal和GoDaddy</h1>

<p>我有一个很稀有的Twitter用户名，<strong>@N</strong>。是的，只有一个字母。曾经有人出价50000美元向我购买这个用户名。也有很多人尝试盗我的帐号，密码重置邮件出现在我的邮箱里是一件很稀疏平常的事。然而今天，这个用户名已经不再属于我。我被迫放弃了它。</p>

<p>2014年1月20日，在我吃午饭的时候收到一封来自PayPal的验证码短信。我想又有人在尝试盗我的PayPal帐号了。于是我无视了它，继续吃我的午饭。</p>

<p>又过了一会儿，我查看了一下我的独立域名邮箱（通过Google Apps服务绑定到Gmail邮箱，域名注册于GoDaddy），发现最后一封邮件是来自于GoDaddy的“确认修改账户信息”。有一个很好的理由可以解释为什么这会是最后一封邮件。</p>

<blockquote>
<p>From: &lt;support@godaddy.com&gt; GoDaddy<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 12:50:02 -0800<br />
Subject: Account Settings Change Confirmation</p>

<p>尊敬的 naoki hiroshima</p>

<p>您收到这封邮件是因为以下账户的账户设置已被修改：</p>

<p>XXXXXXXX</p>

<p>新的设置生效需要一段短暂的时间。</p>

<p>如果这项变更未经您本人同意，请登录您的账户并升级您的安全设置。</p>

<p>如果您无法登录您的账户或者发现未经许可的域名变动，请联系我们的客服中心：support@godaddy.com 或拨打电话 (480) 505-8877。</p>

<p>请注意您的账户使用需要遵守我们的服务条款。</p>

<p>竭诚为您服务，<br />
GoDaddy</p>
</blockquote>

<p>我尝试登录我的GoDaddy账户，不过登录不进去。我又打电话给GoDaddy的客服，解释我现在的状况。客服询问我信用卡号码的末6位，作为验证我身份的手段，不过这显然行不通因为信用卡信息已经被盗号者改了。事实上，我的所有信息都被修改了。我没有办法证明我才是这个域名的真正持有者。</p>

<p>GoDaddy的客服建议我在GoDaddy上填写一份失窃申报，附上任何政府出具的可以证明我身份的证件 (government identification)。我照他的话做了，并被告知至多48小时内会得到回复。我曾天真地以为这对于证明我的身份和我对帐号的所有权足够了。</p>

<h1 id="胁迫的开始">胁迫的开始</h1>

<p>大部分网站使用Email作为验证身份的方式。如果你的邮箱被人攻破，那攻击者可以轻易地重置你在其他网站的密码。在控制了我托管在GoDaddy的域名以后，那个攻击者已经控制了我的邮箱。</p>

<p>基于以往被攻击的经验，我迅速地意识到我的Twitter用户名是这次攻击的目标。很奇怪的，有个我不认识的人发给我一条Facebook信息让我修改Twitter帐号的邮箱地址。我猜测这是攻击者发来的，虽然不知道他的意图不过我还是修改了邮箱。现在Twitter邮箱就变成攻击者无法进入的了。</p>

<p>攻击者多次尝试重置我的Twitter密码但发现收不到重置密码的邮件，因为MX记录从修改到生效需要一些时间。他甚至在Twitter的Zendesk用户支持页面开了一个issue #16134409。</p>

<blockquote>
<p>N, Jan 20 01:43 PM:</p>

<p>Twitter用户名: @n<br />
您的Email: *****@*****.***<br />
上次登录: 12月<br />
手机号码(可选): n/a<br />
附注(可选): 我没有收到我的重置密码邮件，你能手动发给我一份吗？</p>
</blockquote>

<p>Twitter要求攻击者提供更多信息以便处理，于是攻击者就放弃了这条途径。</p>

<p>之后我知道攻击者已经取得了我的Facebook帐号以便和我交涉。在朋友们开始询问我在Facebook上那些奇怪行为的时候我感到糟糕透了。</p>

<p>最后我收到一封来自攻击者的邮件。攻击者试图威胁我放弃。</p>

<blockquote>
<p>From: &lt;swiped@live.com&gt; SOCIAL MEDIA KING<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 15:55:43 -0800<br />
Subject: Hello.</p>

<p>我发现你已经和我的一个同伙聊过了，我可以告诉你你的推测是正确的，我的目标正是@N。我还要告诉你的是你的GoDaddy域名已经被我控制了，并且发了一封伪造的订单，你的域名可能会被godaddy收回然后再也见不到了。</p>

<p>我看到你似乎管理着不少不错的网站我目前还没有去动它们，所有那些网站的数据还完好无损。你是否考虑一下妥协呢？登录@N五分钟让我交换一下用户名，以此来换回你的godaddy帐号以及一些保护帐号的建议呢？</p>
</blockquote>

<p>过了一会儿，我收到来自GoDaddy的回复。</p>

<blockquote>
<p>From: change@godaddy.com<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 17:49:41 -0800<br />
Subject: Update [Incident ID: 21773161] — XXXXX.XXX</p>

<p>很不幸，域名服务无法协助您的变更请求因为您不是该域名的当前注册人。作为注册商我们只能在注册人同意的情况下处理变更请求。如果您准备进一步追诉则您需要决定采用以下一种或者多种方式</p>

<ol>
<li><p>登录 <a href="http://who.godaddy.com/">http://who.godaddy.com/</a> 查看当前域名的Whois信息并和域名注册人直接交涉。</p></li>

<li><p>登录 <a href="http://www.icann.org/dndr/udrp/approved-providers.htm">http://www.icann.org/dndr/udrp/approved-providers.htm</a> 寻找一个ICANN认证的仲裁服务提供商。</p></li>

<li><p>向您的律师提供以下链接以便向GoDaddy提交相关法律文件：<a href="http://www.godaddy.com/agreements/showdoc.aspx?pageid=CIVIL_SUBPOENA">http://www.godaddy.com/agreements/showdoc.aspx?pageid=CIVIL_SUBPOENA</a></p></li>
</ol>
</blockquote>

<p>我的申告被拒绝了因为我不是“当前注册人”。GoDaddy向攻击者询问他是否允许我改变当前用户信息，尽管他并没有询问过我是否同意攻击者修改我的用户信息。我对GoDaddy这种使得真正的所有者找回他们被盗帐号变得更困难的行为感到无比的愤怒。</p>

<p>我的一位同事帮我联系到了GoDaddy的一名高管，那位高管试图让GoDaddy的安全小组来处理这件事情，不过后来就没有消息了。或许是马丁·路德·金纪念日的关系。</p>

<p>然后攻击者又给我发了一封邮件。</p>

<blockquote>
<p>From: &lt;swiped@live.com&gt; SOCIAL MEDIA KING<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 18:50:16 -0800<br />
Subject: …hello</p>

<p>你想好要交换所有权了吗？godaddy帐号已经准备就绪了。密码已经修改，同时绑定到了一个中立的邮箱。</p>
</blockquote>

<p>我咨询了一位在Twitter工作的朋友如果攻击者拿到我的用户名以后是否还有可能追回。此时我想起了<a href="http://www.wired.com/gadgetlab/2012/08/apple-amazon-mat-honan-hacking/">发生在@mat身上的事</a>，决定现在放弃是避免造成无法挽回的损失的唯一办法。于是我回复了攻击者：</p>

<blockquote>
<p>From: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
To: &lt;swiped@live.com&gt; SOCIAL MEDIA KING<br />
Date: Mon, 20 Jan 2014 19:41:17 -0800<br />
Subject: Re: …hello</p>

<p>我已经改名了。拿走。</p>
</blockquote>

<p>我把用户名 @N 改成了 @N_is_stolen ，这是我从2007年注册Twitter以来第一次改名。再见了，我那总是带来麻烦的用户名。</p>

<p>然后我收到了以下回复。</p>

<blockquote>
<p>From: &lt;swiped@live.com&gt; SOCIAL MEDIA KING<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 19:44:02 -0800<br />
Subject: RE: …hello</p>

<p>非常感谢，你的godaddy帐号密码是V;Mz,3{;!’g&amp;</p>

<p>如果你有兴趣的话，我可以告诉你我是怎么盗了你godaddy帐号，以及你应该怎么保护自己的帐号。</p>
</blockquote>

<p>攻击者很快控制了 @N 用户名，而我也重新登录了我的GoDaddy帐号。</p>

<h1 id="paypal和godaddy-让攻击更简单">PayPal和GoDaddy，让攻击更简单</h1>

<p>我问攻击者如何盗取了我的GoDaddy帐号，然后收到了以下回复：</p>

<blockquote>
<p>From: &lt;swiped@live.com&gt; SOCIAL MEDIA KING<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 19:53:52 -0800<br />
Subject: RE: …hello</p>

<ul>
<li><p>我打电话给paypal的客服中心，用了一些很简单的社会工程技巧就得到了你的信用卡号末四位。（<strong>要避免这一点，你需要告诉paypal让他们在你帐号的备注里加上：绝不在电话里透露关于你的任何信息。</strong>）</p></li>

<li><p>接着我又打电话到godaddy说我的信用卡丢了，不过我依然记得最后四位，客服就给了我一个范围让我说出信用卡的前两位（你那次是00-09）。我不知道怎样才能让godaddy更安全，不过我可以推荐给你一些更安全的域名注册商： NameCheap或者eNom（不是network solutions而是enom.com）。</p></li>
</ul>
</blockquote>

<p>我不知道该说哪个让我更震惊，无论是PayPal轻而易举地在电话里就向攻击者透露了我的信用卡末四位，还是GoDaddy接受信用卡末四位+前两位作为验证身份的方法。当我问及这些时，攻击者回复到：</p>

<blockquote>
<p>From: &lt;swiped@live.com&gt; SOCIAL MEDIA KING<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 20:00:31 -0800<br />
Subject: RE: …hello</p>

<p>没错，paypal在电话里告诉了我信用卡信息（我谎称自己是你公司的雇员），而godaddy让我“猜”信用卡的前两位。</p>
</blockquote>

<p>不过要猜中两位数字也不是那么容易的一件事，不是吗？</p>

<blockquote>
<p>From: &lt;swiped@live.com&gt; SOCIAL MEDIA KING<br />
To: &lt;*****@*****.***&gt; Naoki Hiroshima<br />
Date: Mon, 20 Jan 2014 20:09:21 -0800<br />
Subject: RE: …hello</p>

<p>我在一次通话中就猜中了，大部分客服都允许你不断试直到猜中。</p>
</blockquote>

<p>他很幸运因为只要猜两位数字而且在一次通话中就猜中了。事实是，GoDaddy允许他反复尝试直到猜中。太疯狂了。听起来就好像我面对的是未来的<a href="http://zh.wikipedia.org/wiki/%E5%87%AF%E6%96%87%C2%B7%E7%B1%B3%E7%89%B9%E5%B0%BC%E5%85%8B">凯文·米特尼克</a>——而各大公司还没有从米特尼克于1995年左右的所利用的漏洞中吸取足够的教训。</p>

<h1 id="避免使用独立域名邮箱作为登录邮箱">避免使用独立域名邮箱作为登录邮箱</h1>

<p>在GoDaddy帐号恢复了以后，我终于重新得以登录我的邮箱。我把很多网络服务的注册邮箱改成了@gmail.com地址。使用我的绑定了独立域名的Google Apps邮箱看起来很酷，但是存在被盗的风险——在域名服务器被攻破的时候。要是我登录Facebook使用的是@gmail.com邮箱的话，本来攻击者就没法控制我的Facebook帐号了。</p>

<p>如果你也正在使用Google Apps作为很多网站的登录邮箱，那我强烈推荐你停止这么做。换一个@gmail.com邮箱。你的独立域名邮箱可以作为日常通信用，就像我现在依然这么做一样。</p>

<p>同时，我建议你为MX记录设一个相对较长的TTL以防万一。在这次事件中我的TTL是1小时，因此在失去了对域名服务器的控制以后，我没有足够多的时间继续接收邮件。如果TTL设成7天那么长的话，我会有更大的机会找回被盗的帐号。</p>

<p>使用两步验证是必需的。很可能这就是阻止了攻击者登录我的PayPal帐号的原因。虽然这次事件表明即使两步验证也不能防止所有被盗的可能性。</p>

<h1 id="总结">总结</h1>

<p>愚蠢的公司很可能把你的个人信息（例如信用卡号码的一部分）交给一个不怀好意的人。而其中的某些公司甚至允许仅通过信用卡的最后几位来验证你的身份。</p>

<p>为了避免这些公司的草率处理毁了你的“数字人生”，不要让诸如PayPal或是GoDaddy这样的公司保存你的信用卡信息，事实上我已经把我的删掉了。同时我也会尽快地离开GoDaddy和PayPal。</p>

<p>====</p>

<p>惯例在最后附上原文地址：<a href="https://medium.com/p/24eb09e026dd">https://medium.com/p/24eb09e026dd</a></p>

<p>什么？你说某篇文章的下篇？因为想了想剩下的内容要讲得有趣不容易，反倒是炫耀的成分显得更多，下次拣个机会再写吧</p>

<p>——其实真正的原因是当初的草稿找不到了，已经快忘了还准备讲什么了……</p>

	
			

			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/blog/2014/11/02/interview-for-nintendo">任天堂面试记</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/blog/2013/11/03/format-string-attack">一次格式化字符串攻击（上）</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'dyngblog';
    var disqus_identifier = 'http:\/\/blog.dyngr.com\/blog\/2014\/02\/08\/how-i-lost-my-50000-dollars-twitter-username';
    var disqus_title = '我是如何失去价值50000美元的Twitter用户名的';
    var disqus_url = 'http:\/\/blog.dyngr.com\/blog\/2014\/02\/08\/how-i-lost-my-50000-dollars-twitter-username';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>&copy; 2016. All rights reserved.</p>
</div>
    </div>
  </div>
	

	

  
</body>
</html>
